(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var o=t(15),c=t.n(o),a=t(6),r=t(3),i=t(1),u=t(0),d=function(e){var n=e.nameValue,t=e.numberValue,o=e.handleNameChange,c=e.handleNumberChange,a=e.handleClick;return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:o})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:a,children:"add"})})]})},l=function(e){var n=e.persons,t=e.filter,o=e.handleClick,c=""===t?n:n.filter((function(e){return e.name.includes(t)}));return Object(u.jsx)("ul",{children:c.map((function(e){return Object(u.jsxs)("li",{children:[e.name,": ",e.number,Object(u.jsx)("button",{onClick:o(e),children:"delete"})]},e.id)}))})},s=function(e){var n=e.value,t=e.handleChange;return Object(u.jsxs)("div",{children:["find a person: ",Object(u.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.message,t=e.error;if(null===n)return null;var o=t?{color:"red",background:"lightgray",fontSize:"18px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}:{color:"green",background:"lightgray",fontSize:"18px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return Object(u.jsx)("div",{style:o,children:n})},b=t(4),f=t.n(b),j="/api/persons",m=function(){return f.a.get(j).then((function(e){return e.data}))},p=function(e){return f.a.post(j,e).then((function(e){return e.data}))},O=function(e){return f.a.put("".concat(j,"/").concat(e.id),e).then((function(e){return e.data}))},g=function(e){return f.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},x=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],c=Object(i.useState)(""),b=Object(r.a)(c,2),f=b[0],j=b[1],x=Object(i.useState)(""),v=Object(r.a)(x,2),k=v[0],C=v[1],w=Object(i.useState)(""),y=Object(r.a)(w,2),S=y[0],N=y[1],V=Object(i.useState)(null),A=Object(r.a)(V,2),B=A[0],D=A[1],L=Object(i.useState)(!1),z=Object(r.a)(L,2),E=z[0],J=z[1],R=function(e,n){D(e),J(n),setTimeout((function(){D(null)}),5e3)};Object(i.useEffect)((function(){m().then((function(e){o(e)})).catch((function(e){console.log(e),R("Loading the phonebook failed, check console for details!",!0)}))}),[]);var I=function(e){if(window.confirm("".concat(e.name," is already added in the phonebook, replace the old number with a new one?"))){var n=Object(a.a)(Object(a.a)({},e),{},{number:k});O(n).then((function(n){R("Changed ".concat(n.name,"'s number from ").concat(e.number," to ").concat(n.number,"!"),!1),o(t.map((function(e){return e.id!==n.id?e:n})))})).catch((function(e){console.log(e),R(e.response.data.error,!0)}))}};return Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{message:B,error:E}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(s,{value:S,handleChange:function(e){N(e.target.value)}}),Object(u.jsx)("h2",{children:"Add new entry"}),Object(u.jsx)(d,{nameValue:f,numberValue:k,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){C(e.target.value)},handleClick:function(e){if(e.preventDefault(),""!==f&&""!==k){var n=t.find((function(e){return e.name.toLowerCase()===f.toLowerCase()}));if(n)I(n);else p({name:f,number:k}).then((function(e){R("Added ".concat(e.name," to the phonebook!"),!1),o(t.concat(e))})).catch((function(e){console.log(e),R(e.response.data.error,!0)}))}else R("Specify a name and a number please!",!0)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{persons:t,filter:S,handleClick:function(e){return function(){window.confirm("Are you sure you want to delete ".concat(e.name))&&g(e.id).then((function(n){R("Deleted ".concat(e.name," from the phonebook!"),!1),o(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){404===n.response.status?(R("".concat(e.name," was already deleted from the phonebook!"),!0),o(t.filter((function(n){return n.id!==e.id})))):(console.log(n),R("Deleting ".concat(e.name," from the phonebook failed, check console for details!"),!0))}))}}})]})};c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.534504cf.chunk.js.map